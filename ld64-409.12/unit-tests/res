
 * * * Running all unit tests for architecture x86_64 * * *
linker-optimization-hints                AMBIGIOUS missing [X]PASS/[X]FAIL
 * * * 313 of 314 unit-tests passed (99.7 percent) * * *


 * * * Running all unit tests for architecture arm64 * * *
lto-rename_segment                       FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto a.c -c -o a.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto b.c -c -o b.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto main.c -c -o main.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o a.o b.o -Wl,-preload -o main.preload \
-e _entry -nostdlib -Wl,-segalign,0x20 -Wl,-seg1addr,0x200 \
-Wl,-rename_segment,__TEXT,__ROM \
-Wl,-rename_segment,__DATA,__RAM \
-Wl,-rename_section,__DATA,__data_extra,__RAM2,__data \
-Wl,-exported_symbol,_get
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'main.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################absolute-symbol                          FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c -static -c
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  abs.s -static -c
/Users/michael/projects/ld64/ld64-409.12/build/Debug/ld -arch arm64 -static main.o abs.o -e _main -o main -new_linker -macosx_version_min 10.6
/Users/michael/projects/ld64/ld64-409.12/build/Debug/ld -arch arm64 -static -r main.o abs.o -o all.o -new_linker 
nm -m all.o | grep _myAbs | grep absolute | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Users/michael/projects/ld64/ld64-409.12/build/Debug/ld -arch arm64 -static all.o -e _main -o main2 -new_linker -macosx_version_min 10.6
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/pass-iff-exit-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/machocheck main2
FAIL absolute-symbol
machocheck failed: LC_UNIXTHREAD not supported for arm64 in main2
make: *** [all] Error 1
###########################static-executable-pie                    FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test.c -c -o test.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test.o -static -Wl,-pie -o test -e _entry  -nostdlib -Wl,-new_linker
/Users/michael/projects/ld64/ld64-409.12/build/Debug/dyldinfo -rebase test | grep __DATA | wc -l | grep 3 | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
FAIL static-executable-pie
make: *** [all] Error 1
###########################lto-unexport-sym                         FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall   -c a.c 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -c b.c -flto
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall   a.o b.o -unexported_symbols_list unexp.list
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'b.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################zero-fill3                               FAIL Makefile failure
make: *** No rule to make target `test-arm64', needed by `all'.  Stop.
###########################weak_import-disable                      FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -dynamiclib foo.c -o libfoo.dylib 
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/machocheck libfoo.dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c libfoo.dylib -o main1a
nm -m main1a | grep _foo | grep  weak | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c libfoo.dylib -o main1b -DMAKE_FOO_WEAK_IMPORT=1
nm -m main1b | grep _foo | grep  weak | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c libfoo.dylib -o main1c -DMAKE_FOO_WEAK_IMPORT=1 -Wl,-no_weak_imports 2>main1c.errors || true
grep 'ld:' main1c.errors | grep _foo | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
# check dxx works with -no_weak_imports
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main2.c libfoo.dylib -o main2a -Wl,-no_weak_imports
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main2.c libfoo.dylib -o main2b -Wl,-no_weak_imports -mmacosx-version-min=10.7 2>main2b.errors || true
grep _bar main2b.errors | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
FAIL weak_import-disable
make: *** [all] Error 1
###########################re-export-optimizations                  FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `all'.  Stop.
###########################weak_import-local                        FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c foo.c -o main
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/machocheck main
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c foo.c -o main -miphoneos-version-min=3.0
ld: -pie requires targetting a newer minimum version
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################archive-image_info                       FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.m -c -o main.o
libtool -static main.o -o libmain.a
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  libmain.a -o main -framework Foundation
size -m -l main | grep "__image_info" | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
FAIL archive-image_info
make: *** [all] Error 1
###########################weak_import-addend                       FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `all'.  Stop.
###########################re-export-layers                         FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `all'.  Stop.
###########################static-executable-weak-defines           FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test.c -static -o test -e _entry -nostdlib -Wl,-new_linker
strip -S test -o test.stripped
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/pass-iff-exit-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/machocheck test
FAIL static-executable-weak-defines
machocheck failed: LC_UNIXTHREAD not supported for arm64 in test
make: *** [all] Error 1
###########################lto-static-pie                           FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto a.c -c -o a.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto b.c -c -o b.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto main.c -c -o main.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o a.o b.o -static -Wl,-pie -o main-static-pie \
-e _entry -nostdlib  
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'main.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################re-export-optimizations-indirect         FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `all'.  Stop.
###########################re-export-cases                          FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `all'.  Stop.
###########################lto-dylib-export_list                    FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall -stdlib=libc++  -flto foo.cxx -c -o foo.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall -stdlib=libc++  -flto bar.cxx -c -o bar.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall -stdlib=libc++  foo.o bar.o -dynamiclib -o libfoo.dylib -exported_symbols_list foo.exp
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'foo.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################eh-strip-test                            FAIL Makefile failure
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk main.cxx -arch arm64 -o main
FAIL eh-strip-test
main.cxx:1:10: fatal error: 'vector' file not found
#include <vector>
^~~~~~~~
1 error generated.
make: *** [all] Error 1
###########################large-data                               FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test1.c -c -o test1.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test2.c -c -o test2.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test3.c -c -o test3.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test4.c -c -o test4.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test1.o test2.o test3.o test4.o -dynamiclib -o libtest.dylib 2> fail.log
make: *** [all] Error 1
###########################strip-test2                              FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk main.cxx -arch arm64 -o main
main.cxx:1:10: fatal error: 'vector' file not found
#include <vector>
^~~~~~~~
1 error generated.
make: *** [all] Error 1
###########################allow_heap_execute                       FAIL Makefile failure
make: *** No rule to make target `run-arm64', needed by `run'.  Stop.
###########################dwarf-strip-objc                         FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -gdwarf-2 hello.m -c -o hello.o
/Users/michael/projects/ld64/ld64-409.12/build/Debug/ld -r -S hello.o -o hello-r.o
size -m -l hello-r.o | grep "__image_info" | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/pass-iff-stdin.pl
FAIL dwarf-strip-objc
make: *** [all] Error 1
###########################lto-dynamic_export                       FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto main.c -c -o main.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o -o main 
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'main.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################lto-archive-dylib                        FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  foo.c -c -o foo.o
libtool -static foo.o -o libfoo.a 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto main.c -c -o main.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o -o main libfoo.a 
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'main.o' for architecture arm64
clang: error: unable to execute command: Segmentation fault: 11
clang: error: linker command failed due to signal (use -v to see invocation)
make: *** [all] Error 254
###########################lto-preload-pie                          FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto a.c -c -o a.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto b.c -c -o b.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto main.c -c -o main.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o a.o b.o -Wl,-preload -Wl,-pie -o main.preload \
-e _entry -nostdlib -Wl,-segalign,0x20 -Wl,-seg1addr,0x200 
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'main.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################prebound-split-seg                       FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `all'.  Stop.
###########################lto-dead_strip-all-hidden                FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto bar.c  -c -o bar.o -fvisibility=hidden
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -dynamiclib bar.o -o libbar.dylib -dead_strip
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'bar.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################branch-long                              FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `all'.  Stop.
###########################lto-dead_strip-unused                    FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto bar.c  -c -o bar.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto main.c -c -o main.o 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o bar.o -o main
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'main.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################non-lazy-r                               FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `all'.  Stop.
###########################lto-rename_section                       FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto a.c -c -o a.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto b.c -c -o b.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto main.c -c -o main.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o a.o b.o -Wl,-preload -o main.preload \
-e _entry -nostdlib -Wl,-segalign,0x20 -Wl,-seg1addr,0x200 \
-Wl,-rename_section,__DATA,__data,__RAM,__vars \
-Wl,-rename_section,__TEXT,__text,__ROM,__code \
-Wl,-rename_section,__TEXT,__eh_frame,__ROM,__eh_frame \
-Wl,-rename_section,__TEXT,__cstring,__ROM,__const 
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'main.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################cpu-sub-types                            FAIL Makefile failure
make: *** No rule to make target `test-arm64', needed by `test'.  Stop.
###########################tlv-dead_strip                           FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c -o main -dead_strip -mmacosx-version-min=10.7
clang: error: invalid argument '-mmacosx-version-min=10.7' not allowed with '-miphoneos-version-min=9.0'
clang: warning: using sysroot for 'iPhoneOS' but targeting 'MacOSX' [-Wincompatible-sysroot]
make: *** [all] Error 1
###########################lazy-dylib                               FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  foo.c -dynamiclib -o libfoo.dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c -Wl,-lazy_library,libfoo.dylib -o main
ld: library not found for -llazydylib1.o
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################lto-dead_strip-objc                      FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto foo.m  -c -o foo.o -fvisibility=hidden
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -dynamiclib foo.o -o libfoo.dylib -dead_strip -framework Foundation
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'foo.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################lto-dead_strip-coalesce                  FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  foo.c -c -flto -o foo.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c -c -o main.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o foo.o -o main -dead_strip -framework Foundation
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'foo.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################llvm-integration                         FAIL Makefile failure
#
# llvm  : a.c : Dfoo3
# llvm  : b.c : Dfoo2
# MachO : main.c : Ufoo2, Ufoo3
#
#echo "Zero..."
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto a.c -c -o a.o 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto b.c -c -o b.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c -c -o main.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  a.o b.o main.o -o main.exe
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'a.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [zero] Error 1
###########################got-elimination                          FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `all'.  Stop.
###########################lto-dead_strip-tentative                 FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto foo.c -c -o foo.o 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto bar.c -c -o bar.o 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto baz.c -c -o baz.o 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c -c -o main.o 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o foo.o bar.o baz.o -o main -dead_strip
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'foo.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################tlv-basic                                FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c get.s -o main
Undefined symbols for architecture arm64:
"_get_a", referenced from:
_main in main-89d1fb.o
"_get_b", referenced from:
_main in main-89d1fb.o
"_get_c", referenced from:
_main in main-89d1fb.o
"_get_d", referenced from:
_main in main-89d1fb.o
ld: symbol(s) not found for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################switch-jump-table                        FAIL Makefile failure
make: *** No rule to make target `test-arm64', needed by `all'.  Stop.
###########################compact-unwind-basic                     FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `all'.  Stop.
###########################static-executable                        FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test.c -static -o test -e _entry -nostdlib -Wl,-new_linker
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/pass-iff-exit-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/machocheck test
FAIL static-executable
machocheck failed: LC_UNIXTHREAD not supported for arm64 in test
make: *** [all] Error 1
###########################no-object-symbols                        FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -arch arm64 -c empty.s -o empty.o
/Users/michael/projects/ld64/ld64-409.12/build/Debug/ld -r empty.o -x -o empty2.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -lv empty2.o | egrep 'vmsize 0x0[0]+$' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -lv empty2.o | grep 'filesize 0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -lv empty2.o | grep 'nsyms 0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
FAIL no-object-symbols
make: *** [all] Error 1
###########################read-only-relocs                         FAIL Makefile failure
# build libfoo.dylib as regular dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  foo.c -dynamiclib -o libfoo.dylib
# build libtest.dylib using -mdynamic-no-pic, should fail
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test_rebase.c -c 
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-zero.pl /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test_rebase.o libfoo.dylib -dynamiclib -o libtestrebase.dylib -read_only_relocs error 2>/dev/null
FAIL read-only-relocs
make: *** [all] Error 1
###########################operator-new                             FAIL Makefile failure
# verify if operator new is overridden that WEAK_DEFINES is set
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall -stdlib=libc++  -DOP_NEW -I../../include -o main main.cxx
main.cxx:29:10: fatal error: 'new' file not found
#include <new>
^~~~~
1 error generated.
make: *** [all] Error 1
###########################lto-duplicate_symbols                    FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto=thin static.c -c -o static.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto=thin non-static.c -c -o non-static.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto=thin main.c -c -o main.o
# Option -flto-codegen-only is used to avoid LTO optimizations because they
# can rename a static function and thus prevent from testing how linker
# handles duplicate names.
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto=thin -Wl,-flto-codegen-only static.o non-static.o main.o -o main
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'static.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################exported_symbols_list-r                  FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test.c -c -o test.o
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/ObjectDump >/dev/null test.o
/Users/michael/projects/ld64/ld64-409.12/build/Debug/ld -arch arm64 -r -keep_private_externs test.o -exported_symbols_list test.exp -o test-r.o
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/ObjectDump >/dev/null test-r.o
# verify common not in export-list got demoted to private extern
nm -m test-r.o | grep "private external _common_global1" | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl 
# verify only _common_global1 and _func_global1 changed
nm -m test.o | egrep -v '_common_global1|_func_global1|__eh_frame|__data' > test.nm
nm -m test-r.o | egrep -v '_common_global1|_func_global1|__eh_frame|__data' > test-r.nm
diff test.nm test-r.nm
7,8d6
< 0000000000000000 (__TEXT,__text) non-external ltmp0
< 0000000000000040 (__LD,__compact_unwind) non-external ltmp2
make: *** [all] Error 1
###########################dylib-re-export-cycle                    FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `all'.  Stop.
###########################lto-dead_strip-inline-asm                FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto bar.c  -c -o bar.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  bar.o -dynamiclib -o libbar.dylib -dead_strip -Wl,-exported_symbol,_bar
clang: error: unable to execute command: Segmentation fault: 11
clang: error: linker command failed due to signal (use -v to see invocation)
make: *** [all] Error 254
###########################lto-weak_import                          FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  foo.c -dynamiclib -o libfoo.dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto main.c -c -o main.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o -o main libfoo.dylib
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'main.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################install-name-override                    FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  foo.c -dynamiclib -o libfoo.dylib -install_name /usr/local/lib/libfoo.dylib
otool -L libfoo.dylib | grep /usr/local/lib/libfoo.dylib | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c libfoo.dylib -o main
otool -L main | grep /usr/local/lib/libfoo.dylib | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c libfoo.dylib -o mainAlt -mmacosx-version-min=10.5
clang: error: invalid argument '-mmacosx-version-min=10.5' not allowed with '-miphoneos-version-min=9.0'
clang: warning: using sysroot for 'iPhoneOS' but targeting 'MacOSX' [-Wincompatible-sysroot]
make: *** [all] Error 1
###########################lto-dylib-aliases                        FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto foo.c -c -o foo.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  foo.o -dynamiclib -o libfoo.dylib -Wl,-alias,_foo,_bar
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'foo.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################dead_strip-initializers                  FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.cxx other.cxx -dead_strip -o main
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/machocheck main
nm main | grep dead_door_knob | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
nm main | grep ctr | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
nm main | grep dtr | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -static main.cxx other.cxx -dead_strip -nostdlib -e _main -o main-static -Wl,-new_linker
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/machocheck main-static
FAIL dead_strip-initializers
machocheck failed: LC_UNIXTHREAD not supported for arm64 in main-static
make: *** [all] Error 1
###########################cpu-sub-types-preference                 FAIL Makefile failure
make: *** No rule to make target `test-arm64', needed by `test'.  Stop.
###########################weak-def-hidden-and-global               FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  myglobal.c myhidden.s -dynamiclib -o libmy.dylib 2>warnings.txt
grep "global weak"  warnings.txt | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
FAIL weak-def-hidden-and-global
make: *** [all] Error 1
###########################lto-dead_strip-some-hidden               FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto bar.c  -c -o bar.o -fvisibility=hidden
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -dynamiclib bar.o -o libbar.dylib -dead_strip
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'bar.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################weak_dylib                               FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -dynamiclib  foo.c -o libfoo.dylib 
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/machocheck libfoo.dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -dynamiclib  bar.c -o libbar.dylib 
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/machocheck libbar.dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -miphoneos-version-min=3.0 main.c -o main libfoo.dylib libbar.dylib
ld: -pie requires targetting a newer minimum version
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################symbol-hiding-umbrella                   FAIL Makefile failure
# In this test case aaa and bbb both moved between libfoo and libar
# between 10.4 and 10.5.
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -dynamiclib bar.c -o libbar.dylib -install_name /usr/lib/libbar.dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -dynamiclib foo.c -Wl,-reexport_library,libbar.dylib -o libfoo.dylib 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -dynamiclib bar.c -o libbar.dylib -install_name /usr/lib/libbar_alt.dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c -o main-10.5  libfoo.dylib -L. -mmacosx-version-min=10.5
ld: warning: linker symbol '$ld$hide$os10.6$_bar' hides a non-existent symbol '_bar'
clang: error: invalid argument '-mmacosx-version-min=10.5' not allowed with '-miphoneos-version-min=9.0'
clang: warning: using sysroot for 'iPhoneOS' but targeting 'MacOSX' [-Wincompatible-sysroot]
make: *** [all] Error 1
###########################lto-objc-archive                         FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  foo.m -c -o foo.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  bar.m -c -o bar.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  foo2.c -c -o foo2.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  bar2.c -c -o bar2.o
libtool -static foo.o bar.o foo2.o bar2.o -o libfoobar.a 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto main.m -c -o main.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o -o main libfoobar.a -framework Foundation
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'main.o' for architecture arm64
clang: error: unable to execute command: Segmentation fault: 11
clang: error: linker command failed due to signal (use -v to see invocation)
make: *** [all] Error 254
###########################kext-basic                               FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -static  -mkernel -c mykext.c -o mykext.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -static  -mkernel -c mykextinfo.c -o mykextinfo.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -Wl,-kext mykext.o mykextinfo.o -nostdlib -lkmodc++ -lkmod -lcc_kext -o mykext -Wl,-w -Wl,-new_linker
ld: library not found for -lkmodc++
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################lto-objc-image-info                      FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto main.m -c -o main.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o -o main -framework Foundation
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'main.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################coalesce_weak_def_in_dylib               FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `run'.  Stop.
###########################stripped-indirect-symbol-table           FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  a.c -c -o a.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  b.c -c -o b.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  c.c -c -o c.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  func.c -c -o func.o
/Users/michael/projects/ld64/ld64-409.12/build/Debug/ld -arch arm64 -r a.o b.o c.o -o most.o
strip -x -R strip.list most.o -o most.stripped.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/strip: error: symbols referenced by relocation entries that can't be stripped in: /Users/michael/projects/ld64/ld64-409.12/unit-tests/test-cases/stripped-indirect-symbol-table/most.o
_bb
_b
make: *** [all] Error 1
###########################tentative-to-real-hidden                 FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  test.c -c -o test.o
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/ObjectDump >/dev/null test.o
/Users/michael/projects/ld64/ld64-409.12/build/Debug/ld -arch arm64 -d -r test.o -exported_symbol _tent1 -o test-r.o
otool -rv test-r.o | grep _tent | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/pass-iff-no-stdin.pl
FAIL tentative-to-real-hidden
make: *** [all] Error 1
###########################eh-stripped-symbols                      FAIL Makefile failure
make: *** No rule to make target `all-arm64', needed by `all'.  Stop.
###########################lto-live_support_section                 FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto -o foo foo.c -Wl,-dead_strip,-exported_symbol,_my_global
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file '/var/folders/pm/6jgmcb416_sbd6ky4l2rhqjr0000gn/T/foo-4bf107.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################literals-coalesce                        FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk  literals.s -c -o literals-arm64.o
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/ObjectDump literals-arm64.o | grep 'name:'| uniq -c | grep -v '^   [1|2]' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
FAIL literals-coalesce
make: *** [all] Error 1
###########################symbol-moving                            FAIL Makefile failure
# In this test case aaa and bbb both moved between libfoo and libar
# between 10.4 and 10.5.
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -dynamiclib bar.c bbb.c anotb.c -o libbar.dylib  
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/machocheck libbar.dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -dynamiclib foo.c aaa.c bnota.c -o libfoo.dylib 
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-non-zero.pl /Users/michael/projects/ld64/ld64-409.12/build/Debug/machocheck libfoo.dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.c -o main-10.4  libfoo.dylib libbar.dylib -mmacosx-version-min=10.4
clang: error: invalid argument '-mmacosx-version-min=10.4' not allowed with '-miphoneos-version-min=9.0'
clang: warning: using sysroot for 'iPhoneOS' but targeting 'MacOSX' [-Wincompatible-sysroot]
make: *** [all] Error 1
###########################late-link-error                          FAIL Makefile failure
/Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-exit-zero.pl /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  link_error.s -dynamiclib -o link_error-arm64  2> fail.log
FAIL late-link-error
make: *** [all] Error 1
###########################lto-object_path                          FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto main.c -c -o main.o -fvisibility=hidden
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o -o main -Wl,-object_path_lto,`pwd`/main.tmp.o
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'main.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################kext-undefined-export                    FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -static -mkernel -c mykext.c -o mykext.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -static -mkernel -c mykextinfo.c -o mykextinfo.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -Wl,-kext mykext.o mykextinfo.o -nostdlib -lkmodc++ -lkmod -lcc_kext -exported_symbols_list mykext.exp -o mykext -Wl,-w -Wl,-new_linker
ld: library not found for -lkmodc++
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################lto-archive-objc                         FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto foo.c -c -o foo.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto bar.m -c -o bar.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto baz.m -c -o baz.o
libtool -static foo.o bar.o baz.o -o libstuff.a
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  -flto main.c -c -o main.o
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.o -o main libstuff.a -framework Foundation -ObjC 
ld: warning: ignoring file , file was built for archive which is not the architecture being linked (arm64): libstuff.a
ld: could not process llvm bitcode object file, because /Users/michael/projects/ld64/ld64-409.12/build/lib/libLTO.dylib could not be loaded file 'main.o' for architecture arm64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [all] Error 1
###########################linker-optimization-hints                FAIL Makefile failure
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  main.s -c -o main.o
# test ADRP/ADD -> ADR when target is in __TEXT
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAdd.s -c -o AdrpAdd1.o -DFOO_AS_CONST=1
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAdd1.o main.o -o AdrpAdd1.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd1.exe | grep 'adr	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd1.exe | grep 'adrp	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd1.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD -> ADR when target is in __DATA and main executable
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAdd.s -c -o AdrpAdd2.o -DFOO_AS_DATA=1
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAdd2.o main.o -o AdrpAdd2.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd2.exe | grep 'adr	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd2.exe | grep 'adrp	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd2.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD -> ADR when target is in __DATA and dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAdd.s -c -o AdrpAdd3.o -DFOO_AS_DATA=1
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAdd3.o -dynamiclib -o AdrpAdd3.dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd3.dylib | grep 'adr	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd3.dylib | grep 'adrp	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd3.dylib | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD !->  when target is in __DATA and dylib in shared region
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAdd.s -c -o AdrpAdd4.o -DFOO_AS_DATA=1
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAdd4.o -dynamiclib -o AdrpAdd4.dylib -install_name /usr/lib/libjunk.dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd4.dylib | grep 'adrp	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd4.dylib | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd4.dylib | grep 'adr	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD !->  when target is in __TEXT but too far
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAdd.s -c -o AdrpAdd5.o -DFOO_AS_CONST=1 -DPADDING
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAdd5.o main.o -o AdrpAdd5.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd5.exe | grep 'adrp	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd5.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAdd5.exe | grep 'adr	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> ADR/LDR when target is in __TEXT for 8-bit load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-ldr-g8.o -DFOO_AS_CONST -DLOAD_GPR_8 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-ldr-g8.o main.o -o AdrpAddLdr-ldr-g8.exe 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-g8.exe | grep 'adr	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-g8.exe | grep 'ldr\s*b1, \[x0\]' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-g8.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> ADR/LDR when target is in __TEXT for 16-bit load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-ldr-g16.o -DFOO_AS_CONST -DLOAD_GPR_16
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-ldr-g16.o main.o -o AdrpAddLdr-ldr-g16.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-g16.exe | grep 'adr	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-g16.exe | grep 'ldr\s*h1, \[x0\]' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-g16.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> LDR when target is in __TEXT for 32-bit load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-ldr-g32.o -DFOO_AS_CONST -DLOAD_GPR_32
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-ldr-g32.o main.o -o AdrpAddLdr-ldr-g32.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-g32.exe | grep 'ldr	w1, _foo' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-g32.exe | grep 'adrp	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-g32.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> LDR when target is in __TEXT for 64-bit load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-ldr-g64.o -DFOO_AS_CONST -DLOAD_GPR_64
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-ldr-g64.o main.o -o AdrpAddLdr-ldr-g64.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-g64.exe | grep 'adrp	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-g64.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> LDR when target is in __TEXT for 32-bit fp load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-ldr-f32.o -DFOO_AS_CONST -DLOAD_FPR_32
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-ldr-f32.o main.o -o AdrpAddLdr-ldr-f32.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-f32.exe | grep 'ldr	s1, _foo' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-f32.exe | grep 'adrp	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-f32.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> LDR when target is in __TEXT for 64-bit fp load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-ldr-f64.o -DFOO_AS_CONST -DLOAD_FPR_64
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-ldr-f64.o main.o -o AdrpAddLdr-ldr-f64.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-f64.exe | grep 'ldr	d1, _foo' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-f64.exe | grep 'adrp	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-f64.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> LDR when target is in __TEXT for 128-bit vec load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-ldr-v128.o -DFOO_AS_CONST -DLOAD_VEC_128
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-ldr-v128.o main.o -o AdrpAddLdr-ldr-v128.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-v128.exe | grep 'ldr	q1, _foo' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-v128.exe | grep 'adrp	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-ldr-v128.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> ADRP/LD when target is far for 8-bit load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-far-g8.o -DFOO_AS_CONST -DLOAD_GPR_8  -DPADDING
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-far-g8.o main.o -o AdrpAddLdr-far-g8.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-g8.exe | grep 'ldr	b1, \[x0, ' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-g8.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> ADRP/LD when target is far for 16-bit load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-far-g16.o -DFOO_AS_CONST -DLOAD_GPR_16 -DPADDING
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-far-g16.o main.o -o AdrpAddLdr-far-g16.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-g16.exe | grep 'ldr	h1, \[x0, ' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-g16.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> ADRP/LD when target is far for 32-bit load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-far-g32.o -DFOO_AS_CONST -DLOAD_GPR_32 -DPADDING
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-far-g32.o main.o -o AdrpAddLdr-far-g32.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-g32.exe | grep 'ldr	w1, \[x0, ' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-g32.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> ADRP/LD when target is far for 64-bit load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-far-g64.o -DFOO_AS_CONST -DLOAD_GPR_64 -DPADDING
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-far-g64.o main.o -o AdrpAddLdr-far-g64.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-g64.exe | grep 'ldr	x1, \[x0, ' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-g64.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> ADRP/LD when target is far for 32-bit fp load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-far-f32.o -DFOO_AS_CONST -DLOAD_FPR_32 -DPADDING
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-far-f32.o main.o -o AdrpAddLdr-far-f32.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-f32.exe | grep 'ldr	s1, \[x0, ' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-f32.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> ADRP/LD when target is far for 64-bit fp load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-far-f64.o -DFOO_AS_CONST -DLOAD_FPR_64 -DPADDING
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-far-f64.o main.o -o AdrpAddLdr-far-f64.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-f64.exe | grep 'ldr	d1, \[x0, ' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-f64.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> ADRP/LD when target is far for 128-bit vec load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-far-v128.o -DFOO_AS_CONST -DLOAD_VEC_128 -DPADDING
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-far-v128.o main.o -o AdrpAddLdr-far-v128.exe
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-v128.exe | grep 'ldr	q1, \[x0, ' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-far-v128.exe | grep 'add	x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
# test ADRP/ADD/LD -> ADRP/LD when target is in movable segment for 8-bit load
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr.s -c -o AdrpAddLdr-seg-g8.o -DFOO_AS_DATA -DLOAD_GPR_8 
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -ccc-install-dir /Users/michael/projects/ld64/ld64-409.12/build/Debug -miphoneos-version-min=9.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk -Wall  AdrpAddLdr-seg-g8.o -dynamiclib -o AdrpAddLdr-seg-g8.dylib -install_name /usr/lib/libjunk.dylib
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-seg-g8.dylib | grep 'adrp\s*x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-no-stdin.pl
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool -tV AdrpAddLdr-seg-g8.dylib | grep 'add\s*x0' | /Users/michael/projects/ld64/ld64-409.12/unit-tests/bin/fail-if-stdin.pl
FAIL linker-optimization-hints
make: *** [AdrpAddLdr-seg] Error 1
########################### * * * 216 of 289 unit-tests passed (74.7 percent) * * *

